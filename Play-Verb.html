<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>德語動詞消消樂</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #FFF8F0; /* 奶白色背景 */
            text-align: center;
            margin: 0;
            padding: 20px;
            user-select: none;
        }
        
        h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 30px;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 800px;
            margin: 0 auto;
            gap: 20px;
        }
        
        .bubble {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            color: black;
            cursor: pointer;
            box-shadow: 
                inset 0 -3px 10px rgba(0,0,0,0.2),
                inset 0 3px 10px rgba(255,255,255,0.5),
                0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s, opacity 0.3s;
            text-align: center;
            padding: 10px;
            box-sizing: border-box;
        }
        
        .bubble:hover {
            transform: scale(1.05);
        }
        
        .bubble.selected {
            transform: scale(1.1);
            box-shadow: 
                inset 0 -3px 10px rgba(0,0,0,0.2),
                inset 0 3px 10px rgba(255,255,255,0.5),
                0 5px 15px rgba(0,0,0,0.3),
                0 0 0 3px rgba(255,255,255,0.8);
        }
        
        .bubble.matched {
            opacity: 0;
            transform: scale(0);
            pointer-events: none;
        }
        
        .completion-message {
            font-size: 3em;
            color: #4CAF50;
            margin-top: 50px;
            display: none;
        }
        
        .timer {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #555;
        }
    </style>
</head>
<body>
    <h1>German Verb - Play</h1>
    <div class="timer">Time: <span id="time">0</span> sec</div>
    <div class="game-container" id="gameContainer"></div>
    <div class="completion-message" id="completionMessage">Good!</div>

    <script>
        // 游戏数据
        const verbPairs = [
            { german: "ich spiele", english: "I play" },
            { german: "du spielst", english: "you play (singular)" },
            { german: "er spielt", english: "he plays" },
            { german: "wir spielen", english: "we play" },
            { german: "ihr spielt", english: "you play (plural)" },
            { german: "sie spielen", english: "they play" }
        ];

        // 游戏状态
        let selectedBubbles = [];
        let matchedPairs = 0;
        let startTime = null;
        let timerInterval = null;
        let totalPairs = verbPairs.length;

        // 初始化游戏
        function initGame() {
            const gameContainer = document.getElementById('gameContainer');
            gameContainer.innerHTML = '';
            selectedBubbles = [];
            matchedPairs = 0;
            
            // 创建所有泡泡（德语和英语各一份）
            const allItems = [];
            verbPairs.forEach(pair => {
                allItems.push({ text: pair.german, match: pair.english, type: 'german' });
                allItems.push({ text: pair.english, match: pair.german, type: 'english' });
            });

            // 随机排序
            shuffleArray(allItems);

            // 创建泡泡元素
            allItems.forEach((item, index) => {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.textContent = item.text;
                bubble.dataset.match = item.match;
                bubble.dataset.index = index;
                bubble.dataset.type = item.type;
                
                // 随机颜色
                const hue = Math.floor(Math.random() * 360);
                bubble.style.background = `hsl(${hue}, 80%, 75%)`;
                
                bubble.addEventListener('click', handleBubbleClick);
                gameContainer.appendChild(bubble);
            });

            // 開始計時
            startTime = new Date();
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
            document.getElementById('completionMessage').style.display = 'none';
        }

        // 处理泡泡点击
        function handleBubbleClick(event) {
            const bubble = event.currentTarget;
            
            // 如果已经选中或已匹配，则忽略
            if (bubble.classList.contains('selected') || bubble.classList.contains('matched')) {
                return;
            }
            
            // 如果已经选中了两个泡泡，则忽略
            if (selectedBubbles.length >= 2) {
                return;
            }
            
            // 选中泡泡
            bubble.classList.add('selected');
            selectedBubbles.push(bubble);
            
            // 如果选中了两个泡泡，检查是否匹配
            if (selectedBubbles.length === 2) {
                const bubble1 = selectedBubbles[0];
                const bubble2 = selectedBubbles[1];
                
                // 检查是否匹配
                if (bubble1.dataset.match === bubble2.textContent && 
                    bubble2.dataset.match === bubble1.textContent) {
                    // 匹配成功
                    setTimeout(() => {
                        bubble1.classList.add('matched');
                        bubble2.classList.add('matched');
                        selectedBubbles = [];
                        matchedPairs++;
                        
                        // 检查游戏是否结束
                        if (matchedPairs === totalPairs) {
                            endGame();
                        }
                    }, 500);
                } else {
                    // 不匹配
                    setTimeout(() => {
                        bubble1.classList.remove('selected');
                        bubble2.classList.remove('selected');
                        selectedBubbles = [];
                    }, 1000);
                }
            }
        }

        // 结束游戏
        function endGame() {
            clearInterval(timerInterval);
            document.getElementById('completionMessage').style.display = 'block';
        }

        // 更新計時器
        function updateTimer() {
            const currentTime = new Date();
            const elapsed = Math.floor((currentTime - startTime) / 1000);
            document.getElementById('time').textContent = elapsed;
        }

        // 随机排序数组
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // 初始化游戏
        window.onload = initGame;
    </script>
</body>
</html>